1. x264-snapshot-20091208-2245

- Windows

32-bit
./configure --disable-pthread
make 

64-bit
./configure --disable-pthread --disable-avs-input --disable-asm
make

- FreeBSD

Apply x264_bsd.diff patch first and compile:
patch -p1 < /path/to/x264_bsd.diff
./configure --enable-pic
gmake

- Linux, Mac OS X

./configure --enable-pic
make

2. ffmpeg-r20783

First patch ffmpeg with ffmpeg-libx264-keyframe.diff:
$ patch -p0 < ffmpeg-libx264-keyframe.diff

- Windows

32-bit
./configure \
  --target-os=mingw32 \
  --enable-memalign-hack \
  --enable-static --disable-shared --shlibdir=. \
  --disable-encoders --disable-decoders --disable-muxers --disable-demuxers \
  --disable-parsers --disable-bsfs --disable-protocols --disable-devices \
  --disable-network \
  --enable-libx264 --enable-gpl --enable-parser=h264 --enable-encoder=libx264 \
  --enable-decoder=h264 --enable-muxer=h264 --enable-demuxer=h264 \
  --extra-ldflags=-L$X264_HOME --extra-cflags=-I$X264_HOME \
  --disable-debug \
  --disable-ffserver --disable-ffplay --disable-ffmpeg \
  --disable-pthreads --enable-w32threads

64-bit
Edit configure script and remove the following lines:
check_cpp_condition _mingw.h "(__MINGW32_MAJOR_VERSION > 3) || (__MINGW32_MAJOR_VERSION == 3 && __MINGW32_MINOR_VERSION >= 15)" ||
    die "ERROR: MinGW runtime version must be >= 3.15."

Then run:
./configure \
  --arch=amd64 --target-os=mingw32 \
  --enable-memalign-hack \
  --enable-static --disable-shared --shlibdir=. \
  --disable-encoders --disable-decoders --disable-muxers --disable-demuxers \
  --disable-parsers --disable-bsfs --disable-protocols --disable-devices \
  --disable-network \
  --enable-libx264 --enable-gpl --enable-parser=h264 --enable-encoder=libx264 \
  --enable-decoder=h264 --enable-muxer=h264 --enable-demuxer=h264 \
  --extra-ldflags=-L$X264_HOME --extra-cflags=-I$X264_HOME \
  --disable-debug \
  --disable-ffserver --disable-ffplay --disable-ffmpeg \
  --disable-pthreads --enable-w32threads

mingw32-make
Note: mingw64-make failed to work (segmentation fault) that's why we fallback to mingw32-make.

- Linux, FreeBSD

 Note: remove --enable-pic for x86 architecture.

./configure \
  --enable-pic \
  --enable-static --disable-shared --shlibdir=. \
  --disable-encoders --disable-decoders --disable-muxers --disable-demuxers \
  --disable-parsers --disable-bsfs --disable-protocols --disable-devices \
  --disable-network \
  --enable-libx264 --enable-gpl --enable-parser=h264 --enable-encoder=libx264 \
  --enable-decoder=h264 --enable-muxer=h264 --enable-demuxer=h264 \
  --extra-ldflags=-L$X264_HOME --extra-cflags=-I$X264_HOME \
  --disable-debug \
  --disable-ffserver --disable-ffplay --disable-ffmpeg \
  --enable-pthreads

- Mac OS X 

 Note: removed from configure script the option to add -mdynamic-no-pic unless you compile
 for i386 architecture (intel 32-bit).

./configure \
  --enable-static --disable-shared --shlibdir=. \
  --disable-encoders --disable-decoders --disable-muxers --disable-demuxers \
  --disable-parsers --disable-bsfs --disable-protocols --disable-devices \
  --disable-network \
  --enable-libx264 --enable-gpl --enable-parser=h264 --enable-encoder=libx264 \
  --enable-decoder=h264 --enable-muxer=h264 --enable-demuxer=h264 \
  --extra-ldflags="-fPIC -L$X264_HOME" --extra-cflags="-fPIC -I$X264_HOME" \
  --disable-debug \
  --disable-ffserver --disable-ffplay --disable-ffmpeg \
  --enable-pthreads

3. libffmpeg

Open Makefile, uncomment the section for your OS and comment out the others.
Be careful to correctly set X264_HOME, FFMPEG_HOME and JAVA_HOME variables.

Then run:
make (gmake on FreeBSD)

Note:
If compilation errors related to "relocation" occured, you 
have to patch ffmpeg, libswscale and x264.

Apply the following patches in the relevant directory:
- x264-20091208-visibility-hidden.patch
- ffmpeg-visibility-hidden.patch
- ffmpeg-libswcale-visibility-hidden.patch

